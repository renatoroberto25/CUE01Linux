#!/bin/bash

# ğŸ‘¤ CriaÃ§Ã£o e gerenciamento de usuÃ¡rios
sudo adduser testeuser
sudo passwd -l testeuser        # Bloquear senha
sudo passwd -u testeuser        # Desbloquear senha
sudo deluser testeuser          # Remover usuÃ¡rio
sudo addgroup testegroup
sudo adduser testeuser testegroup
sudo delgroup testegroup

# ğŸ” PolÃ­ticas de senha
sudo chage -m 5 -M 90 -I 30 -W 14 testeuser
sudo chage -l testeuser

# ğŸ  PermissÃµes de diretÃ³rio pessoal
sudo chmod 0750 /home/testeuser
sudo chown -R root:root /home/testeuser/
sudo mkdir -p /home/archived_users/
sudo mv /home/testeuser /home/archived_users/

# ğŸ“ PermissÃµes de arquivos e diretÃ³rios
touch file1 file2 file3 file4
chmod u+x file1
chmod o+wx file2
chmod g-r file3
chmod 777 file4

# PermissÃµes numÃ©ricas
chmod 744 file1
chmod 647 file2
chmod 604 file3
chmod 777 file4

# Recursivamente: arquivos 644 e diretÃ³rios 755
sudo find . -type f -print0 | xargs -0 sudo chmod 644
sudo find . -type d -print0 | xargs -0 sudo chmod 755

# ğŸ§ Alterar dono/grupo
sudo chown root:root file1
sudo chown renato:users file2

# ğŸ§· Sticky bit (Ãºtil em /tmp)
mkdir public_dir
chmod 777 public_dir
chmod +t public_dir

# ğŸ” SSH com chaves
ssh-keygen -t rsa -b 4096
ssh-copy-id usuario@localhost
chmod 600 ~/.ssh/authorized_keys

# ğŸšª SSHD: restringir acesso por grupo
sudo addgroup sshlogin
sudo adduser testeuser sshlogin
echo "AllowGroups sshlogin" | sudo tee -a /etc/ssh/sshd_config
sudo systemctl restart ssh.service

# ğŸ”§ ACL (se necessÃ¡rio)
sudo apt install -y acl
sudo mount -o remount,acl /home
sudo setfacl -m u:nobody:rwx /shared_dir
sudo setfacl -d -m u:nobody:rwx /shared_dir

# ğŸ§¹ RemoÃ§Ã£o forÃ§ada (cuidado)
# sudo rm -rf /caminho/arquivo_ou_diretorio

# â„¹ï¸ Comandos informativos
echo -e "\nInformaÃ§Ãµes do sistema:"
df -h
free -m
top -n 1 | head -n 15


PARTE 2

#!/bin/bash

# ğŸ“ Uso do sistema de arquivos
cd ~
mkdir teste_dir
touch teste1.txt teste2.log

# Comandos essenciais para navegaÃ§Ã£o
pwd
ls -lAh
lsblk
df -hT

# ğŸ” Buscar arquivos
find /etc -name "*.conf"
find ~ -type f -size +1M
grep -i "listen" /etc/ssh/sshd_config
grep -r "PermitRootLogin" /etc/

# ğŸ”„ Comparar arquivos
diff teste1.txt teste2.log

# ğŸ—ƒï¸ Verificar partiÃ§Ãµes
sudo fdisk -l
sudo lsblk -f
cat /proc/partitions

# ğŸ“‹ Verificar permissÃµes de software (exemplo com apt)
dpkg -s openssh-server | grep "^Status"
dpkg -L openssh-server

# ğŸ§° ManutenÃ§Ã£o de Recursos

# ğŸ” Verificar e monitorar logs
sudo journalctl -xe
sudo tail -n 50 /var/log/syslog
sudo tail -n 50 /var/log/auth.log

# ğŸ“† Agendar tarefa com cron
crontab -l
echo "*/10 * * * * echo 'ping' >> /tmp/cron_teste.log" | crontab -

# ğŸ–´ Montar partiÃ§Ã£o via fstab
echo -e "\n# Entrada de teste para /dev/sdb1\n/dev/sdb1\t/mnt/usb\tvfat\tdefaults\t0\t0" | sudo tee -a /etc/fstab
sudo mkdir -p /mnt/usb
sudo mount -a && echo "âœ” Montagem via fstab testada" || echo "âŒ Erro ao montar"

# ğŸ”ƒ Nomear unidade USB
# Exemplo: usar `e2label` para ext4 ou `mlabel` para FAT
# sudo e2label /dev/sdb1 MYDISK

# ğŸ”Œ Carregar e descarregar mÃ³dulos do kernel
lsmod | grep usb
sudo modprobe loop
sudo rmmod loop

# ğŸ“¦ Rotacionar logs (manual)
sudo logrotate -d /etc/logrotate.conf

# ğŸ§  InformaÃ§Ãµes de uso do sistema
free -h
top -n 1 | head -n 20
uptime

# ğŸ” SSH avanÃ§ado: desativar root e ajustar porta
sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bkp
sudo sed -i 's/#Port 22/Port 2222/' /etc/ssh/sshd_config
sudo sed -i 's/#PermitRootLogin.*/PermitRootLogin no/' /etc/ssh/sshd_config
sudo systemctl restart ssh

# âœ… FinalizaÃ§Ã£o
echo -e "\nâœ” Parte 3 concluÃ­da com comandos de sistema de arquivos e recursos."
